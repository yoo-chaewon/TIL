## 2020.02.26(ìˆ˜)

#### í¸ì§‘ ì·¨ì†Œ í™•ì¸

- ë©”ëª¨ í¸ì§‘ì— ë³€ê²½ ì‚¬í•­ì´ ìˆì„ ê²½ìš°, ëª¨ë‹¬ì„ ë‚´ë¦´ ë•Œ ì €ì¥í•  ê²ƒì¸ì§€ ì·¨ì†Œí•  ê²ƒì¸ì§€ ë¬»ëŠ” ê¸°ëŠ¥

- ë³€ê²½ëœ ìƒí™© ìˆëŠ”ì§€ í™•ì¸

  ```swift
  var originalContent: String? //í¸ì§‘ ì´ì „ì˜ ë‚´ìš© ì €ì¥í•  ë³€ìˆ˜
  // ì´ë³€ìˆ˜ì™€ textViewì˜ textë¥¼ ë¹„êµí•˜ì—¬, ë³€ê²½ ë‚´ìš©ì´ ìˆëŠ”ì§€ í™•ì¸
  
  if let memo = editTarget {
    navigationItem.title = "ë©”ëª¨ í¸ì§‘"
    memoTextView.text = memo.content
    originalContent = memo.content // ë³€ê²½ ëª¨ë“œì¸ ê²½ìš°ì—ë§Œ ì €ì¥
  }else {
    navigationItem.title = "ìƒˆ ë©”ëª¨"
    memoTextView.text = ""
  }
          
  memoTextView.delegate = self
  ```

- presentationController

  ```swift
  override func viewWillAppear(_ animated: Bool) {
    super.viewWillAppear(animated)
    navigationController?.presentationController?.delegate = self
  }
  
  override func viewWillDisappear(_ animated: Bool) {
    super.viewWillDisappear(animated)
    navigationController?.presentationController?.delegate = nil
  }
  ```

- UITextViewDelegate ğŸ‘‰ textê°€ í¸ì§‘ë  ë•Œë§ˆë‹¤ ë³€ê²½ ì‚¬í•­ì´ ìˆëŠ”ì§€ ê³„ì† í™•ì¸

  ```swift
  //textí¸ì§‘í•  ë•Œë§ˆë‹¤ ë°˜ë³µì ìœ¼ë¡œ í˜¸ì¶œ
  extension NewMemoViewController : UITextViewDelegate{
      func textViewDidChange(_ textView: UITextView) {
          if let original = originalContent, let edited = textView.text{
              if #available(iOS 13.0, *) {
                //isModalInPresentation ì€ 13ì´ìƒë¶€í„° ì‚¬ìš©.
                // original != edited  ğŸ‘‰ ë³€ê²½ëœ ë‚´ìš©ì´ ìˆì„ ë•Œ true
                  isModalInPresentation = original != edited
              } else {
                  // Fallback on earlier versions
              }
          }
      }
  }
  ```

- ì•Œë¦¼ì°½ ë„ì›Œì£¼ê¸°

  ```swift
  extension NewMemoViewController : UIAdaptivePresentationControllerDelegate{
      func presentationControllerDidAttemptToDismiss(_ presentationController: UIPresentationController) {
          let alert = UIAlertController(title: "ì•Œë¦¼", message: "ë³€ê²½ëœ ë‚´ìš©ì„ ì €ì¥í•˜ì‹œê² ìŠµë‹ˆê¹Œ?", preferredStyle: .alert)
          let okAction = UIAlertAction(title: "í™•ì¸", style: .default) { [weak self](action) in
              self?.clickSave(action)
          }
          
          alert.addAction(okAction)
          
          let cancelAction = UIAlertAction(title: "ì·¨ì†Œ", style: .cancel) { [weak self](action) in
              self?.clickClose(action)
          }
          alert.addAction(cancelAction)
          
          present(alert, animated: true, completion: nil)
      }
  }
  
  ```

  

#### ë°ì´í„° ë² ì´ìŠ¤ ì‚­ì œ

- DataManager.swift

  ```swift
  func deleteMemo(_ memo: Memo?){
    if let memo = memo{
      mainContext.delete(memo)
      saveContext()
    }
  }
  ```



#### TableViewì—ì„œ ìŠ¤ì™€ì´í”„ í•´ì„œ ì‚­ì œ

```swift
// Override to support conditional editing of the table view.
override func tableView(_ tableView: UITableView, canEditRowAt indexPath: IndexPath) -> Bool {
        // Return false if you do not want the specified item to be editable.
  return true
}
override func tableView(_ tableView: UITableView, editingStyleForRowAt indexPath: IndexPath) -> UITableViewCell.EditingStyle {
  return .delete
}

// Override to support editing the table view.
override func tableView(_ tableView: UITableView, commit editingStyle: UITableViewCell.EditingStyle, forRowAt indexPath: IndexPath) {
  if editingStyle == .delete {
    let target = DataManager.shared.memoList[indexPath.row]
    DataManager.shared.deleteMemo(target)
    DataManager.shared.memoList.remove(at: indexPath.row)
    tableView.deleteRows(at: [indexPath], with: .fade)
  } else if editingStyle == .insert {
    // Create a new instance of the appropriate class, insert it into the array, and add a new row to the table view
  } 
}
```



#### ê³µìœ ê¸°ëŠ¥

> UIActivityViewController ë¡œ êµ¬í˜„í•  ìˆ˜ ìˆìŒ.

```swift
@IBAction func shareMemo(_ sender: Any) {
  guard let memo = memo?.content  else {
    return
  }
  
  let vc = UIActivityViewController(activityItems: [memo], applicationActivities: nil)
  present(vc, animated: true, completion: nil)
}
```

textì™€ ê´€ë ¨ëœ ì•±ë“¤ì´ í‘œì‹œë¨ ! 



#### í‚¤ë³´ë“œ ë…¸í‹°í”¼ì¼€ì´ì…˜ ì²˜ë¦¬

> https://developer.apple.com/documentation/uikit/uitextview

- ë§ˆì§€ë§‰ ë¬¸ìì—´ë“¤ì´ í‚¤ë³´ë“œì— ê°€ë ¤ì ¸ì„œ ë³´ì´ì§€ ì•ŠëŠ” ë¬¸ì œ í•´ê²°í•´ì•¼í•¨.

  ğŸ‘‰ í‚¤ë³´ë“œê°€ í‘œì‹œë˜ë©´ í™”ë©´ ì•„ë˜ í‚¤ë³´ë“œ ë†’ì´ ë§Œí¼ í…ìŠ¤íŠ¸ê°€ ì˜¬ë¼ì™€ì•¼í•¨.

- notificationì„ í†µí•´ ğŸ‘‰ ë†’ì´ ê³„ì‚°í•´ì„œ ë³€ê²½

  ```swift
  willShowToken = NotificationCenter.default.addObserver(forName: UIResponder.keyboardWillShowNotification, object: nil, queue: OperationQueue.main, using: { [weak self](noti) in
  guard let strongSelf = self else {return}
  if let frame = noti.userInfo?[UIResponder.keyboardFrameEndUserInfoKey] as? NSValue{
    let height = frame.cgRectValue.height
                  
    var inset = strongSelf.memoTextView.contentInset
    inset.bottom = height
    strongSelf.memoTextView.contentInset = inset
                 
    inset = strongSelf.memoTextView.scrollIndicatorInsets
    inset.bottom = height
    strongSelf.memoTextView.scrollIndicatorInsets = inset
  }
  })
  
  willHideToken = NotificationCenter.default.addObserver(forName: UIResponder.keyboardWillHideNotification, object: nil, queue: OperationQueue.main, using: { [weak self](noti) in
  guard let strongSelf = self else {return}
             
             var inset = strongSelf.memoTextView.contentInset
             inset.bottom = 0
             strongSelf.memoTextView.contentInset = inset
              
              inset = strongSelf.memoTextView.scrollIndicatorInsets
              inset.bottom = 0
              strongSelf.memoTextView.scrollIndicatorInsets = inset
          })
  ```

  

#### First Responder

> ì…ë ¥ í¬ì»¤ìŠ¤ë¥¼ ê°€ì§„ ë·°
>
> ë”°ë¼ì„œ, TextViewë¥¼ First Responderë¡œ ë§Œë“¤ì–´ì£¼ë©´, TextViewê°€ ì„ íƒë˜ê³  í‚¤ë³´ë“œê°€ ìë™ìœ¼ë¡œ í‘œì‹œë¨.

```swift
memoTextView.becomeFirstResponder()
memoTextView.resignFirstResponder()
```



#### iPad ì§€ì›

> iOS ì•±ì€ ê¸°ë³¸ì ìœ¼ë¡œ Universal App ì„.
>
> ì¦‰, ì•„ì´í°ê³¼ ì•„ì´íŒ¨ë“œì—ì„œ ëª¨ë‘ ì‹¤í–‰ë˜ëŠ” ì•±
>
> ğŸ‘‰ AutoLayoutë§Œ ì œëŒ€ë¡œ ì‹¤í–‰í–ˆë‹¤ë©´, ì•„ì´íŒ¨ë“œ/ì•„ì´í°ì—ì„œ ëª¨ë‘ ì˜ ì‘ë™í•¨.

- TextViewì˜ textí¬ê¸°

  > Font ğŸ‘‰ Compact(ìƒëŒ€ì ìœ¼ë¡œ ì‘ì€) / Regular(ìƒëŒ€ì ìœ¼ë¡œ í°-ì•„ì´íŒ¨ë“œ)
  >
  > ì„¤ì •í•´ë‘ë©´, IOSê°€ ì‚¬ì´ì¦ˆ í´ë˜ìŠ¤ì— ë§ê²Œ ì•Œì•„ì„œ ì‚¬ì´ì¦ˆ ì¡°ì ˆ ~

- size class ğŸ‘‰ ì•”ê¸°í•  í•„ìš” X

  > View as : Device Configuration Pane ğŸ‘‰ ì—¬ê¸°ì— Deviceë³„ë¡œ Compact / Regular ë‚˜ì™€ ìˆìŒ.



